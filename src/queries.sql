WITH result AS (SELECT cardbox.cardbox_id, cardbox.width, cardbox.height, sum(duration) AS total FROM cardbox JOIN card ON card.cardbox = cardbox.cardbox_id JOIN tester ON tester.card = card.card_id JOIN testing_scheme ON testing_scheme.tester = tester.tester_id JOIN control ON control.control_id = testing_scheme.control GROUP BY cardbox.cardbox_id, card.card_id) SELECT * FROM result WHERE (total = (SELECT max(total) FROM result));